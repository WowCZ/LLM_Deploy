srun: job 1150208 queued and waiting for resources
srun: job 1150208 has been allocated resources
srun: Job 1150208 scheduled successfully!
Current QUOTA_TYPE is [reserved], which means the job has occupied quota in RESERVED_TOTAL under your partition.
Current PHX_PRIORITY is normal

>>> openai_key:  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
Traceback (most recent call last):
  File "api_server.py", line 12, in <module>
    model_api = DavinciAPI()
  File "/mnt/petrelfs/chenzhi/workspace/LLM/llm_api/davinci.py", line 20, in __init__
    super(DavinciAPI, self).__init__(model_name, model_path)
  File "/mnt/petrelfs/chenzhi/workspace/LLM/llm_api/base_api.py", line 11, in __init__
    self.model, self.tokenizer = self._initialize_llm()
  File "/mnt/petrelfs/chenzhi/workspace/LLM/llm_api/davinci.py", line 28, in _initialize_llm
    completion = openai.Completion.create(model="text-davinci-003",
  File "/mnt/petrelfs/chenzhi/miniconda3/envs/llm/lib/python3.8/site-packages/openai/api_resources/completion.py", line 25, in create
    return super().create(*args, **kwargs)
  File "/mnt/petrelfs/chenzhi/miniconda3/envs/llm/lib/python3.8/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 149, in create
    ) = cls.__prepare_create_request(
  File "/mnt/petrelfs/chenzhi/miniconda3/envs/llm/lib/python3.8/site-packages/openai/api_resources/abstract/engine_api_resource.py", line 106, in __prepare_create_request
    requestor = api_requestor.APIRequestor(
  File "/mnt/petrelfs/chenzhi/miniconda3/envs/llm/lib/python3.8/site-packages/openai/api_requestor.py", line 130, in __init__
    self.api_key = key or util.default_api_key()
  File "/mnt/petrelfs/chenzhi/miniconda3/envs/llm/lib/python3.8/site-packages/openai/util.py", line 186, in default_api_key
    raise openai.error.AuthenticationError(
openai.error.AuthenticationError: No API key provided. You can set your API key in code using 'openai.api_key = <API-KEY>', or you can set the environment variable OPENAI_API_KEY=<API-KEY>). If your API key is stored in a file, you can point the openai module at it with 'openai.api_key_path = <PATH>'. You can generate API keys in the OpenAI web interface. See https://onboard.openai.com for details, or email support@openai.com if you have any questions.
srun: error: SH-IDC1-10-140-24-72: task 0: Exited with exit code 1
srun: launch/slurm: _step_signal: Terminating StepId=1150208.0
